<section>
  <div class=" container py-5">
    <div class="page-header shadow-lg">
      <h1>{{'orders.orders' | translate}}</h1>
      <!--  -->
       <!-- Filter -->
    <div class="my-4">
        <div class="p-4">
            <form [formGroup]="reportForm" (ngSubmit)="onSubmit(reportForm)">
                <div class="my-4">
                    <div class="container py-5">
                        <table>
                            <tbody>
                                <tr>
                                    <td class="px-2 alone">
                                        <!--  Status -->
                                        <div class="">
                                            <mat-form-field [hideRequiredMarker]="hideRequiredMarker">
                                                <mat-label>{{'reports.status' | translate}}</mat-label>
                                                <mat-select formControlName="status">
                                                    <mat-option>None</mat-option>
                                                    <mat-option *ngFor="let item of status" [value]="item.id">
                                                        {{item.name}}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </div>

                                    </td>
                                    <td class="alone">
                                        <!--  Department -->
                                        <div class="">
                                            <mat-form-field [hideRequiredMarker]="hideRequiredMarker">
                                                <mat-label>{{'reports.department' | translate}}</mat-label>
                                                <!-- <mat-select (selectionChange)="onselectDepartment()" [(value)]="departmentId" -->
                                                <mat-select formControlName="department_id">
                                                    <mat-option>None</mat-option>
                                                    <mat-option *ngFor="let item of departments" [value]="item.id">
                                                        {{item.name}}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </div>

                                    </td>
                                    <td class="alone">
                                        <!--  Engineer -->
                                        <div class="">
                                            <mat-form-field [hideRequiredMarker]="hideRequiredMarker">
                                                <mat-label>{{'reports.engineer' | translate}}</mat-label>
                                                <mat-select formControlName="engineer_id">
                                                    <mat-option>None</mat-option>
                                                    <mat-option *ngFor="let item of engineers" [value]="item.id">
                                                        {{item.name}}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </div>
                                    </td>

                                </tr>
                                <tr>
                                    <td class="px-2 alone">
                                        <!--  Technician -->
                                        <div class="">
                                            <mat-form-field [hideRequiredMarker]="hideRequiredMarker">
                                                <mat-label>{{'reports.technician' | translate}}</mat-label>
                                                <mat-select formControlName="technician_id">
                                                    <mat-option>None</mat-option>
                                                    <mat-option *ngFor="let item of technicians" [value]="item.id">
                                                        {{item.name}}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="text-start mt-3">
                    <button class="primary text-center w-25">{{'search'|translate}}</button>
                </div>
            </form>
        </div>
    </div>

    <!--  -->
      <div class="col-6">
        <input [(ngModel)]="searchValue" (keyup)="allOrders()" type="text" class="form-control"
          placeholder="Search here">
      </div>

      <button routerLink="add-edit-order" class="primary px-3">
        <span class="fa-solid fa-plus mx-2"></span>
        <span>{{'addnew'|translate}}</span>
      </button>
    </div>

    <!--  -->
    <table class="custom-table table-print" [dir]="currentLang =='en' ? 'ltr' : 'rtl'">
      <thead class="text-capitalize">
        <th class="alone p-2">#</th>
        <th class="alone">{{'reports.building' | translate}}</th>
        <th class="alone">{{'reports.work_type' | translate}}</th>
        <th class="alone">{{'reports.source' | translate}}</th>
        <th class="alone">{{'reports.department' | translate}}</th>
        <th class="alone">{{'reports.engineer' | translate}}</th>
        <th class="alone">{{'reports.technician' | translate}}</th>
        <th class="alone">{{'reports.added_by' | translate}}</th>
        <th class="alone">{{'reports.status' | translate}}</th>
      </thead>
      <tbody>
        <tr *ngFor="let item of tableData; let isEven = even" [class]="isEven ? '' : 'bg-secondary-subtle'">
          <td class="alone p-2"><a [routerLink]="['/dashboard/admin/work-orders/view-order', item.id]">{{
              item.id }}</a></td>
          <td class="alone">{{ item.building?.name }}</td>
          <td class="alone">{{ item.work_type?.name }}</td>
          <td class="alone">{{ item.source?.name }}</td>
          <td class="alone">{{ item.department?.name }}</td>
          <td class="alone">{{ item.engineer?.name }}</td>
          <td class="alone">{{ item.technician?.name }}</td>
          <td class="alone">{{ item.added_by?.name }}</td>
          <td class="alone">{{ item.status?.name }}</td>
        </tr>
      </tbody>
    </table>

    <!--  -->
    <!-- <table class="custom-table">
      <thead class="text-capitalize">
        <th class="alone">#</th>
        <th class="alone">{{'orders.workType' | translate}}</th>
        <th class="alone">{{'orders.building' | translate}}</th>
        <th class="alone">{{'orders.floor' | translate}}</th>
        <th class="alone">{{'orders.room' | translate}}</th>
        <th class="alone">{{'orders.requestername' | translate}}</th>
        <th class="alone">{{'orders.date' | translate}}</th>
        <th class="alone">{{'orders.actions' | translate}}</th>
      </thead>
      <tbody>
        <tr *ngFor="let item of tableData; let isEven = even" [class]="isEven ? '' : 'bg-secondary-subtle'">
          <td class="px-2"><a [routerLink]="['view-order', item.id]">{{ item.id }}</a></td>
          <td>{{ item.work_type.name }}</td>
          <td>{{ item.building.name }}</td>
          <td>{{ item.floor_no }}</td>
          <td>{{ item.room_no }}</td>
          <td>{{item.customer_name}}</td>

          <td>{{ item.start_date | date : "dd-MM-yyyy , hh:mm a" }}</td>

          <td class="text-center">
            <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu">
              <mat-icon>more_vert</mat-icon>
            </button>
            <mat-menu #menu="matMenu">
              <button [routerLink]="['view-order', item.id]" mat-menu-item>
                <mat-icon>visibility</mat-icon>
                <span>{{'users.view' | translate}}</span>
              </button>
              <button [routerLink]="['edit-order',item.id]" mat-menu-item>
                <mat-icon>edit_square</mat-icon>
                <span>{{'edit'|translate}}</span>
              </button>
              <button mat-menu-item (click)="deleteDialog(item)">
                <mat-icon>delete</mat-icon>
                <span>{{'delete'|translate}}</span>
              </button>
            </mat-menu>
          </td>
        </tr>
      </tbody>
    </table> -->
  </div>
  <div class="bg-info">
    <mat-paginator #paginator class="demo-paginator" (page)="handlePageEvent($event)" [length]="tableResponse?.total"
      [pageSize]="tableResponse?.pageSize" [pageSizeOptions]="[5, 10, 15, 20, 40, 100]" [pageIndex]="pageIndex"
      aria-label="Select page">
    </mat-paginator>
  </div>
</section>